language: go
dist: trusty
jobs:
  include:
  - stage: build docker image
    script:
    - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
    - docker build -t samihan/go_webapp .
    - docker images
    - docker push samihan/go_webapp
  - stage: Deploy to Heroku
    deploy:
      provider: heroku
      api_key:
        secure: g+Zm9QEV6UAkF/EzdwbBA1zIpU7dD9FsaC7rtvuagDVEnMhMk2fkYWVAg/EemUyflfzgC3v35i6wPKRl0fPur43gHNwQz7tsXZXRu27oFBO9FY/PmwfcbzzSngj3+gT4Sk5oM24C2TeuHzUHG9xSIdbpSYN8NBCtPuHVEs1VeZm+CaXfHhmhWaD8HL945mSi/hEe/vEWF6nseqlKedWTtTVefQ/IWu+OvQzWxPBt7tmSGkOzH+Lj/13kA/9qsG2R4stJb6Rm6ig1RAPrCg1G+wZdJTzJGt3oRqoH423twDn5b4Rl9LhOKvG9taWlf/46xjQVUqCL68QJn9v8MAiWQrMSiiLgYU3liFyWC9UEZU4fMlSAHuOk0y/LxzctG9LcDcqQ3sCGu1q+8KstCUN6ULpDulpuFRX97tRrrVFrSBPFby/r6BcAPcavP8aYg4WRaxk28LGDtNuua2JiFIjFjL74oii1xR9DVrkiApFR2MCVBBVSyvNaZr/jAJDYuAUa0hOz4rDKU5YbhFKaow/NeHXy5Bk+SQwyvESU0iICX6ahKxJxbLHqRa+nY+eRiYhaTr0zdwxCvAzkZeUfeWIvmnB5O9bOJ09Gjaz/pE/ZJ2eC78tnEBZHsPKnZgnXWDsNsH57Dak+8D+/rUCyOyFwq0lzYq/8jmWFc6VUDimB/Ys=
      app: salty-refuge-57331
      on:
        repo: samihan25/go_webapp